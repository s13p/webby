import { jsx as _jsx } from "react/jsx-runtime";
import { useEffect, useRef } from "react";
import { useInView, useMotionValue, useSpring } from "framer-motion";
import { addPropertyControls, ControlType } from "framer";
function Counter({
  startingNumber,
  endingNumber,
  direction,
  style
}) {
  const ref = useRef(null);
  const motionValue = useMotionValue(direction === "down" ? endingNumber : startingNumber);
  const springValue = useSpring(motionValue, {
    damping: 300,
    stiffness: 100,
    from: {
      x: startingNumber
    },
    to: {
      x: endingNumber
    }
  });
  const isInView = useInView(ref, {
    once: true,
    margin: "-100px"
  });
  useEffect(() => {
    if (isInView) {
      motionValue.set(direction === "down" ? startingNumber : endingNumber);
    }
  }, [motionValue, isInView]);
  useEffect(() => {
    springValue.onChange(latest => {
      if (ref.current) {
        ref.current.textContent = Intl.NumberFormat("en-US").format(latest.toFixed(0));
      }
    });
  }, [springValue]);
  return /*#__PURE__*/_jsx("span", {
    ref: ref,
    style: style
  });
}
export default function Animated_Counter({
  startingNumber,
  endingNumber,
  direction,
  font
}) {
  return /*#__PURE__*/_jsx(Counter, {
    startingNumber: startingNumber,
    endingNumber: endingNumber,
    direction: direction,
    style: {
      fontSize: font.size,
      fontWeight: font.weight,
      color: font.color,
      fontFamily: `'${font.fontFace}'`
    }
  });
}
;
addPropertyControls(Animated_Counter, {
  startingNumber: {
    type: ControlType.Number,
    defaultValue: 0,
    title: "Start from"
  },
  endingNumber: {
    type: ControlType.Number,
    defaultValue: 1e3,
    title: "End at"
  },
  direction: {
    type: ControlType.Enum,
    options: ["down", "up"],
    optionTitles: ["Down", "Up"],
    defaultValue: "up"
  },
  font: {
    type: ControlType.Object,
    controls: {
      fontFace: {
        type: ControlType.String,
        defaultValue: "Inter"
      },
      size: {
        type: ControlType.Number,
        defaultValue: 55
      },
      color: {
        type: ControlType.Color,
        defaultValue: "#fff"
      },
      weight: {
        type: ControlType.Enum,
        defaultValue: "600",
        options: ["400", "500", "600"]
      }
    }
  }
});
export const __FramerMetadata__ = {
  "exports": {
    "default": {
      "type": "reactComponent",
      "name": "Animated_Counter",
      "slots": [],
      "annotations": {
        "framerContractVersion": "1"
      }
    },
    "__FramerMetadata__": {
      "type": "variable"
    }
  }
};
//# sourceMappingURL=./Counter.map